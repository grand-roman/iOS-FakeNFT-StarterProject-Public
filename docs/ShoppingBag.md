# Экран корзины покупок

# YP-6. Список токенов в корзине

- Андреев Роман
- Когорта: 06
- Эпик: Каталог

# Проблема:

Наши пользователи могут не только выбирать NFT токены, но и приобретать их! Для этого необходимо реализовать функционал покупки выбранных токенов пользователем из корзины.

# Решение:

Необходимо сверстать главный экран корзины согласно макету.

[https://www.figma.com/file/k1LcgXHGTHIeiCv4XuPbND/FakeNFT-(YP)?type=design&node-id=641-22061&mode=dev](https://www.figma.com/file/k1LcgXHGTHIeiCv4XuPbND/FakeNFT-(YP)?type=design&node-id=641-22061&mode=dev)

На нём должны отображаться: список NFT токенов, внизу экрана отображаться информация о токенах в корзине (их количество, общая сумма и кнопка оплаты), кнопка оплаты токенов в корзине, а также вверху экрана присутствовать кнопка для выбора сортировки токенов. Необходимо реализовать:

- Логику на экране корзины. При заходе на экран корзины должен стрелять запрос в ЕП /api/v1/orders/1 (на время запроса показывать троббер), откуда мы будем получать список текущих заказов в корзине (вернутся id). Не забыть учесть с пустой корзиной - если токенов нет, то показывать заглушку, указанную в макетах. После получения списка NFT для каждого из них по id должен выстрелить запрос в ЕП /api/v1/nft(тоже показывать троббер), откуда будут получены данные для отображения коллекции, а также для подписи рядом с кнопкой оплаты.
- Сделать экшен кнопки оплаты. При нажатии кнопки “К оплате” должен происходить переход на экран выбора способа оплаты. Верстку экрана делаем в следующей задаче, пока что достаточно выполнить переход.
- Необходимо реализовать логику удаления NFT токена и при нажатии кнопки удаления должно появлятся меню подтверждения действия. При нажатии отмены меню должно скрываться. При нажатии на подтверждения должен происходить выстрел в ЕП /api/v1/orders/1 со списком NFT токенов без токена, для которого вызвалось меню с удалением(показывать троббер). После успешного ответа необходимо ещё раз обратится к /api/v1/orders/1 и перезагрузить экран заказов с информацией о них(показывать троббер).

# YP-7. Выбор способа оплаты в корзине

- Исполнитель: Аксененко Олег
- Ожидаемое время выполнения: 2 дня
- Действительное время выолнения: ???

# Проблема:

Наши пользователи могут не только выбирать NFT токены, но и приобретать их! Для этого необходимо реализовать функционал покупки выбранных токенов пользователем из корзины.

# Решение:

Необходимо сверстать экран выбора способа оплаты:

[https://www.figma.com/file/k1LcgXHGTHIeiCv4XuPbND/FakeNFT-(YP)?type=design&node-id=641-25144&mode=dev](https://www.figma.com/file/k1LcgXHGTHIeiCv4XuPbND/FakeNFT-(YP)?type=design&node-id=641-25144&mode=dev)

На этом экране должны отображаться способы оплаты, ссылка на лицензионное соглашение, а также кнопка оплатить.

Необходимо реализовать:

- При попадении на экран необходимо делать запрос в ЕП /api/v1/currencies, откуда будем получать данные для отображения валют. На время запроса необходимо крутить троббер.
- При нажатии на кнопку “Пользовательского соглашения” должно открываться URL по адресу [https://yandex.ru/legal/practicum_termsofuse/](https://yandex.ru/legal/practicum_termsofuse/) в WebView.
- При нажатии на кнопку оплатить должен осуществляться запрос в ЕП /api/v1/orders/1/payment/{currency_id}, куда будет передаваться выбранная валюта, на время запроса должен крутиться троббер. Обрабатывать ответ будем в следующей задаче, пока что достаточно начать делать запрос.

# YP-8. Показ результатов оплаты в корзине

- Исполнитель: Аксененко Олег
- Ожидаемое время выполнения: 2 дня
- Действительное время выолнения: ???

# Проблема:

Наши пользователи могут не только выбирать NFT токены, но и приобретать их! Для этого необходимо реализовать функционал покупки выбранных токенов пользователем из корзины.

# Решение:

Необходимо сверстать экран с результатом оплаты:

[https://www.figma.com/file/k1LcgXHGTHIeiCv4XuPbND/FakeNFT-(YP)?type=design&node-id=641-28900&mode=dev](https://www.figma.com/file/k1LcgXHGTHIeiCv4XuPbND/FakeNFT-(YP)?type=design&node-id=641-28900&mode=dev)

Необходимо реализовать:

- После ответа от оплаты в случае успеха/не успеха показывать экран с результатом оплаты.
- При нажатии на кнопку "Попробовать ещё раз" должен скрываться экран и происходить показ каталога (при показе делать перезапрос текущей корзины).